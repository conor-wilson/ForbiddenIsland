title Setup

participant Setup
participant User Interface
participant FloodDeck
participant TreasureDeck
participant Board
participant BoardView
participant PlayerList
participant Player
participant GameLogic

// Flood setup
Setup->FloodDeck:setup
activate FloodDeck
loop all Loactions
  FloodDeck->FloodDeck:discardLocation
end
FloodDeck->FloodDeck:shuffle
deactivate FloodDeck

// Treasure setup
Setup->TreasureDeck:setup
activate TreasureDeck
loop all Treasure cards
  TreasureDeck->TreasureDeck:discard
end
TreasureDeck->TreasureDeck:shuffle
deactivate TreasureDeck

//Board setup
Setup->Board:setup
activate Board
Board->Board:setLocationOrder
Board->Board:initialiseBoard
loop 6
  Board->FloodDeck:draw
end
deactivate Board

// Players setup
Setup->PlayerList:setup
activate PlayerList
PlayerList->User Interface:queryNumberOfPlayers
activate User Interface
User Interface->>PlayerList:numberOfPlayers
deactivate User Interface
PlayerList->PlayerList:shuffleRoles
loop numberOfPlayer
  PlayerList->Player:createPlayer
  activate Player
  Player->>PlayerList:player
  PlayerList->Player:setup()
  deactivate Player
end
deactivate PlayerList

// GameLogic setup
Setup->GameLogic:setup
activate GameLogic
GameLogic->User Interface:queryDifficulty
activate User Interface
User Interface->GameLogic:waterLevel
deactivate User Interface
deactivate GameLogic

// UI setup
Setup->User Interface:setup
activate User Interface
User Interface->BoardView:setup
activate BoardView
BoardView->PlayerList:getPlayers
activate PlayerList
PlayerList->BoardView:players
deactivate PlayerList
deactivate BoardView
deactivate User Interface

Setup->TreasureDeck:addWatersRiseCards
activate TreasureDeck
TreasureDeck->TreasureDeck:addWatersRise
TreasureDeck->TreasureDeck:fullShuffle
deactivate TreasureDeck