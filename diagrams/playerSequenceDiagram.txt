title Player Turn

participant Current Player
participant Board
participant TreasureTile
participant GameLogic
participant Other Player
participant User Interface

alt move
  Current Player->Current Player:getMoveOptions
  Current Player->User Interface:promptDirection
  activate User Interface
  User Interface->>Current Player:Direction
  deactivate User Interface
else shoreUp
  Current Player->Current Player:getShoreUpOptions
  Current Player->User Interface:promptShoreUp
  activate User Interface
  User Interface->>Current Player:Direction
  deactivate User Interface
  opt Direction != null
  	Current Player->Board:shoreUp
  end
else giveTreasure
  Current Player->Current Player:getTreasureCardsOnly
  opt cards.size() == 0
    Current Player->User Interface:noCardsToGive
  else
    Current Player->Current Player:getPlayersOnMyTile
    opt (playersOnMyTile.size() == 0
      Current Player->User Interface:noOneToGiveTreasureTo
    else
      Current Player->User Interface:getPlayerToGiveTreasureTo
      activate User Interface
      User Interface->>Current Player:Player
      deactivate User Interface
      Current Player->Other Player:acceptCard
      activate Other Player
      Other Player->>Current Player:accepted
      deactivate Other Player
  end
  end
else captureTreasure
  Current Player->Board:getTile
  activate Board
  Board->>Current Player:currentTile
  deactivate Board
  opt currentTile not instanceof TreaasureTile
    Current Player->User Interface:notOnTreasureTile
  else
    Current Player->TreasureTile:getTreasure
    activate TreasureTile
    TreasureTile->>Current Player:Treasure
    deactivate TreasureTile
    opt player has enough treasure cards
    	Current Player->Current Player:discardTreasure
        Current Player->GameLogic:treasureCaptured
        Current Player->User Interface:tresaureCaptured
    else
	    Current Player->User Interface:notEnoughTreasureCards
    end
  end
else useSpecialActionCard
  Current Player->User Interface:promptPlayerUseSpecialAction
  activate User Interface
  User Interface->>Current Player:Other Player
  deactivate User Interface
  opt Other Player != null
    Current Player->Other Player:getSpecialActionCards
    activate Other Player
    Other Player->>Current Player:cards
    opt cards == null
      Current Player->User Interface:playerHasNoActionCards
    else
      Current Player->User Interface:useSpecialActionCard
      activate User Interface
      User Interface->>Current Player:card
      deactivate User Interface
      opt card != null
        Other Player->Other Player:discardTreasure
        deactivate Other Player
      end
    end
  end
else options
  Current Player->User Interface:promptOption
  activate User Interface
  User Interface->>Current Player:Option
  deactivate User Interface
  opt Option != null
    alt displayAllHands
      Current Player->User Interface:displayAllHands
    else endTurn
      Current Player->Current Player:endTurn
    else quit
      Current Player->GameLogic:quit()
    end
  end
end